<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Azure Key Vault Provider for Secrets Store CSI Driver â€“ Tutorials</title><link>https://azure.github.io/secrets-store-csi-driver-provider-azure/demos-and-tutorials/tutorials/</link><description>Recent content in Tutorials on Azure Key Vault Provider for Secrets Store CSI Driver</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://azure.github.io/secrets-store-csi-driver-provider-azure/demos-and-tutorials/tutorials/index.xml" rel="self" type="application/rss+xml"/><item><title>Demos-and-Tutorials: Set up an Azure KeyVault</title><link>https://azure.github.io/secrets-store-csi-driver-provider-azure/demos-and-tutorials/tutorials/setup-keyvault/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://azure.github.io/secrets-store-csi-driver-provider-azure/demos-and-tutorials/tutorials/setup-keyvault/</guid><description>
&lt;p>The &lt;a href="https://docs.microsoft.com/azure/key-vault/">Azure Key Vault&lt;/a> will be used to store your secrets. Run the following to create a Resource Group, and a uniquely named Azure Key Vault:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash"> &lt;span style="color:#000">KEYVAULT_RESOURCE_GROUP&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;keyvault-resource-group&amp;gt;
&lt;span style="color:#000">KEYVAULT_LOCATION&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&amp;lt;keyvault-location&amp;gt;
&lt;span style="color:#000">KEYVAULT_NAME&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>secret-store-&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>cat /dev/urandom &lt;span style="color:#000;font-weight:bold">|&lt;/span> tr -dc &lt;span style="color:#4e9a06">&amp;#39;a-zA-Z0-9&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> fold -w &lt;span style="color:#0000cf;font-weight:bold">10&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> head -n 1&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
az group create -n &lt;span style="color:#000">$KEYVAULT_RESOURCE_GROUP&lt;/span> --location &lt;span style="color:#000">$KEYVAULT_LOCATION&lt;/span>
az keyvault create -n &lt;span style="color:#000">$KEYVAULT_NAME&lt;/span> -g &lt;span style="color:#000">$KEYVAULT_RESOURCE_GROUP&lt;/span> --location &lt;span style="color:#000">$KEYVAULT_LOCATION&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>If you were to check in your Azure Subscription, you will have a new Resource Group and Key Vault created. You can learn more &lt;a href="https://docs.microsoft.com/azure/key-vault/about-keys-secrets-and-certificates#objects-identifiers-and-versioning">here&lt;/a> about Azure Key Vault naming, objects, types, and versioning.&lt;/p>
&lt;p>Below are examples of how to quickly add a few objects to your Key Vault (make sure to add your own object name):&lt;/p>
&lt;p>ðŸ’¡ &lt;strong>Please add 2 Objects (Keys and/or Secrets) and 2 Certificates (1 PEM, and 1 PKCS12) to your Key Vault.&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">az keyvault secret &lt;span style="color:#204a87">set&lt;/span> --vault-name &lt;span style="color:#000">$KEYVAULT_NAME&lt;/span> --name &amp;lt;secretNameHere&amp;gt; --value &lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>cat /dev/urandom &lt;span style="color:#000;font-weight:bold">|&lt;/span> tr -dc &lt;span style="color:#4e9a06">&amp;#39;a-zA-Z0-9&amp;#39;&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> fold -w &lt;span style="color:#0000cf;font-weight:bold">40&lt;/span> &lt;span style="color:#000;font-weight:bold">|&lt;/span> head -n 1&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>
az keyvault key create --vault-name &lt;span style="color:#000">$KEYVAULT_NAME&lt;/span> --name &amp;lt;keyNameHere&amp;gt;
az keyvault certificate create --vault-name &lt;span style="color:#000">$KEYVAULT_NAME&lt;/span> --name &amp;lt;certNameHere&amp;gt; -p &lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">$(&lt;/span>az keyvault certificate get-default-policy&lt;span style="color:#204a87;font-weight:bold">)&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>
&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Please keep track of the Key Vault Objects' name, type, and version&lt;/strong> . You will be adding them to a &lt;code>secrets.env&lt;/code> file for testing as described &lt;a href="../../../testing/#preparing-your-secrets">here&lt;/a>&lt;/p>
&lt;p>You can retrieve the value of a Key Vault secret with the following script:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">&lt;span style="color:#8f5902;font-style:italic"># to view a given secret&amp;#39;s value&lt;/span>
az keyvault secret show --vault-name &lt;span style="color:#000">$KEYVAULT_NAME&lt;/span> --name &amp;lt;secretNameHere&amp;gt; --query value -o tsv
&lt;span style="color:#8f5902;font-style:italic"># to view a given key&amp;#39;s value&lt;/span>
az keyvault key show --vault-name &lt;span style="color:#000">$KEYVAULT_NAME&lt;/span> --name &amp;lt;yourKeyNameHere&amp;gt; --query &lt;span style="color:#4e9a06">&amp;#34;key.n&amp;#34;&lt;/span> -o tsv
&lt;span style="color:#8f5902;font-style:italic"># to view a given certificate&amp;#39;s value&lt;/span>
az keyvault certificate show --vault-name &lt;span style="color:#000">$KEYVAULT_NAME&lt;/span> --name &amp;lt;yourCertificateNameHere&amp;gt; --query cer -o tsv
&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>